<% print_name ||= false %>
<% inline_date ||= false %>
<% short_labels ||= false %>
<% target ||= nil %>
<% pdf ||= nil %>
<% wc = scene.word_count %>
<% long ||= nil %>
<% total_wc ||= 0 %>

<table style="width:100%">
  <tbody>
    <tr>
    <% if pdf and !long %>
      <td width="20%;">  <%= scene.time_to_text %></td>
      <td width="25%;">  <strong><i><%= scene.section.name %></i></strong></td>
      <td width="55%;"><%= scene.artifact.nil? ? '' : "#{scene.artifact_name} - " %><%= scene.place.empty? ? '' : "#{scene.place&.to_plain_text}" %></td>
    <% else %>
      <% if inline_date %>
        <td colspan="7"><%= scene.time_to_text %> :</td>
      <% else %>
        <td width="16%;">  <%= scene.time_to_text %></td>
        <td width="1%;">  <%= (scene.title_scene? ? '*' : ' ') %> </td>
        <td width="2%;">
          <% unless pdf %>
            <div id="scene-checkbox-<%= scene.id %>">
              <%= check_box_tag 'check', !scene.check, scene.check,
                :data => {:remote => true, 
                          :url => url_for( :controller => 'scenes', :action => 'check', :id => scene.id),
                          :method => :put},
                          :class => 'input-large' %>
            </div>
          <% end %>
        </td>
        <td width="5%;">
          <% if target.nil? %>
            <%= (pdf.nil? ? link_to(scene.abc, scene_path(scene)) : scene.abc) %></td>
          <% else %>
            <%= (pdf.nil? ? link_to(scene.abc, scene_path(scene), target: target) : scene.abc) %></td>
          <% end %>
      <% end %>
      <% unless scene.section.nil? %>
        <td width="25%;">  <strong><i><%= scene.section.name %></i></strong></td>
      <% end %>
      <td width="43%;"><%= scene.artifact.nil? ? '' : "#{scene.artifact_name} - " %><%= scene.place.empty? ? '' : "#{scene.place&.to_plain_text}" %></td>
      <td class="text-end" width="5%;">
        <% if long %>
        <span style="background-color: #<%= count_color(wc) %>">
          <%=  number_with_delimiter(wc, :delimiter => ',') %>
        </span>
      </td>
      <% end %>
      <td class="text-end" width="5%;">
      <% if total_wc > 0%>
        <%=  number_to_percentage(total_wc.to_f/wc_total.to_f*100, precision: 1) %>
      <% end %>
      <td class="text-end" width="5%;">
      <% if total_wc > 0%>
        <%=  number_with_delimiter(total_wc, :delimiter => ',') %>
      <% end %>
      </td>
      <% if print_name %>
        </td></tr><tr><td></td><td colspan="7"><%= (short_labels ? scene.name : scene.plain_name) %></td>
      <% end %>
    <% end %>
    </tr>
  </tbody>
</table>
