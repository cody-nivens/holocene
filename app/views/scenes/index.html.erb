<p id='notice'><%= notice %></p>

<h2>
  <% case @situated.class.name %>
  <% when 'Book' %>
    <%== breadcrumb(@situated) %>
  <% when 'Story' %>
    <%== breadcrumb(@situated.book, @situated) %>
  <% when 'KeyPoint' %>
    <%== breadcrumb(@situated.scripted.book, @situated.scripted, @situated) %>
  <% end %>
</h2>


<%= form_with model: Scene.new, url: (@situated.instance_of?(Book) ? book_scenes_path(@situated) : polymorphic_path([@situated, :scenes])), method: :get, id: 'my-form', remote: true, format: :js, class: 'form-inline' do %>
  <%= hidden_field_tag :situated_id, @situated.id %>
  <%= hidden_field_tag :situated_type, @situated.class.name %>

  <div class='row'>
    <div class='col-md-2'>
      <div class='form-check'>
        <label class='checkbox'>
          <%= check_box_tag :toggle, @toggle, @toggle, class: 'checkbox inline' %> Detail
        </label>
      </div>
    </div>
    <div class='col-md-2'>
  <div class='form-check'>
    <label class='checkbox'>
      <%= check_box_tag :print, @print, @print, class: 'checkbox inline' %> Print
    </label>
  </div>
    </div>
    <div class='col-md-2'>
      <div class='form-check'>
        <label class='checkbox'>
          <%= check_box_tag :no_section, @no_section, @no_section, class: 'checkbox inline' %> No Section
        </label>
      </div>
    </div>
    <div class='col-md-2'>
      <div class='form-check'>
        <label class='checkbox'>
          <%= check_box_tag :no_scene, @no_scene, @no_scene, class: 'checkbox inline' %> No Scene
        </label>
      </div>
    </div>
    <div class='col-md-2'>
      <div class='form-check'>
        <label class='checkbox'>
          <%= check_box_tag :only_section, @only_section, @only_section, class: 'checkbox inline' %> Only Section
        </label>
      </div>
    </div>
  </div>
  <div class='row'>
    <div class='col-md-2'>
      <div class='form-check'>
        <label class='checkbox'>
          <%= check_box_tag :has_inserts, @has_inserts, @has_inserts, class: 'checkbox inline' %> Has Inserts
        </label>
      </div>
    </div>
    <div class='col-md-2'>
      <div class='form-check'>
        <label class='checkbox'>
          <%= check_box_tag :low_word_count, @low_word_count, @low_word_count, class: 'checkbox inline' %> Low Word Count
        </label>
      </div>
    </div>
    <div class='col-md-2'>
      <div class='form-check'>
        <label class='checkbox'>
          <%= check_box_tag :mid_word_count, @mid_word_count, @mid_word_count, class: 'checkbox inline' %> Mid Word Count
        </label>
      </div>
    </div>
    <div class='col-md-2'>
      <div class='form-check'>
        <label class='checkbox'>
          <%= check_box_tag :better_word_count, @better_word_count, @better_word_count, class: 'checkbox inline' %> Better Word Count
        </label>
      </div>
    </div>
    <div class='col-md-2'>
      <div class='field'>
        <%= select_tag('year', options_for_select(@year_options), prompt: 'Please select an year:', class: 'form-control', onchange: 'javascript:this.form.commit.click();') %>
      </div>
    </div>
    <div class='col-md-2'>
      <%= submit_tag 'Go' %>
    </div>
  </div>
<% end %>

<div id='scenes-list'>
    <%= render partial: 'scenes/scenes', formats: [:html], locals: { scenes: @scenes, print: @print, situated: @situated,
                                                                     no_scene: @no_scene, no_section: @no_section, 
                                                                     low_word_count: @low_word_count,
                                                                     mid_word_count: @mid_word_count,
                                                                     better_word_count: @better_word_count,
                                                                     only_section: @only_section, years: @years, 
                                                                     date: @year, scripted: @scripted } %>
</div>

<% add_to_footer('Timeline', polymorphic_path([@situated, :timeline])) %>
<% add_to_footer('Back', polymorphic_path(@situated)) %>
